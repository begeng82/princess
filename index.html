<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hand Gesture Test</title>
<style>
body{
  margin:0;
  background:black;
  color:cyan;
  font-family:Arial;
}
video{
  position:fixed;
  top:10px;
  right:10px;
  width:200px;
  border-radius:10px;
  opacity:0.8;
}
canvas{
  position:absolute;
  top:0; left:0;
}
#text{
  position:fixed;
  bottom:20px;
  width:100%;
  text-align:center;
  font-size:26px;
}
</style>
</head>
<body>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>
<div id="text">Show your hand âœ‹</div>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>

<script>
const video = document.getElementById("video");
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const text = document.getElementById("text");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Init Hands
const hands = new Hands({
  locateFile: file => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`
});

hands.setOptions({
  maxNumHands:1,
  modelComplexity:1,
  minDetectionConfidence:0.7,
  minTrackingConfidence:0.7
});

// Camera
const camera = new Camera(video, {
  onFrame: async () => {
    await hands.send({image: video});
  },
  width:640,
  height:480
});
camera.start();

// Draw + detect
hands.onResults(results=>{
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if(results.multiHandLandmarks){
    const lm = results.multiHandLandmarks[0];

    drawConnectors(ctx, lm, HAND_CONNECTIONS, {color:"#00ffff", lineWidth:3});
    drawLandmarks(ctx, lm, {color:"#ff00ff", lineWidth:2});

    detectGesture(lm);
  } else {
    text.innerText="Show your hand âœ‹";
  }
});

function isUp(lm, tip, pip){
  return lm[tip].y < lm[pip].y;
}

function detectGesture(lm){
  let index = isUp(lm,8,6);
  let middle = isUp(lm,12,10);
  let ring = isUp(lm,16,14);
  let pinky = isUp(lm,20,18);

  if(index && !middle && !ring && !pinky){
    text.innerText="I Love You MIESHELLA ðŸ’•";
  }
  else if(index && middle && !ring && !pinky){
    text.innerText="Peace âœŒï¸";
  }
  else if(index && middle && ring && pinky){
    text.innerText="Open Hand âœ‹";
  }
  else if(!index && !middle && !ring && !pinky){
    text.innerText="Fist âœŠ";
  }
  else{
    text.innerText="Gesture detected...";
  }
}
</script>

</body>
</html>
